<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>tpk: tpk::DawdleFilter Class Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
<link href="../../tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="../../index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="../../annotated.html"><span>Classes</span></a></li>
    <li><a href="../../files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="../../annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="../../hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="../../functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<b>tpk</b>::<a class="el" href="../../db/d63/classtpk_1_1_dawdle_filter.html">DawdleFilter</a></div>
<h1>tpk::DawdleFilter Class Reference</h1><!-- doxytag: class="tpk::DawdleFilter" --><code>#include &lt;<a class="el" href="../../d9/d14/_dawdle_filter_8h-source.html">DawdleFilter.h</a>&gt;</code>
<p>
Collaboration diagram for tpk::DawdleFilter:<p><center><img src="../../d1/d57/classtpk_1_1_dawdle_filter__coll__graph.png" border="0" usemap="#d5/d97/tpk_1_1_dawdle_filter__coll__map" alt="Collaboration graph"></center>
<map name="d5/d97/tpk_1_1_dawdle_filter__coll__map">
<area href="../../d7/d26/structtpk_1_1xycoord.html" shape="rect" coords="5,5,101,32" alt="">
<area href="../../d2/d77/structtpk_1_1vector.html" shape="rect" coords="125,5,211,32" alt="">
</map>
<center><font size="2">[<a href="../../graph_legend.html">legend</a>]</font></center><a href="../../d6/da7/classtpk_1_1_dawdle_filter-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Dawdle mode filter. 
<p>
A <a class="el" href="../../db/d63/classtpk_1_1_dawdle_filter.html">DawdleFilter</a> is used to implement "dawdle mode" where telescope movements that cause the image to move in the focal plane are filtered so that mechanisms like guiders and active optics sensors can track the movement of the image. This allows offsets to be performed without having to open guider and active optics loops.<p>
In this implementation the filtering is achieved by limiting the rate of change of both the target positon and the pointing origin. The tuning parameter is simply the maximum change (in radians per day).<p>
The target position and pointing origin change are limited independently so in the worst case the image in the focal plane could move at twice the limiting velocity. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d63/classtpk_1_1_dawdle_filter.html#ef163675a4b54fbdd6f9603783e94b43">DawdleFilter</a> (double tunepar=0.0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d63/classtpk_1_1_dawdle_filter.html#a922e8dc8f8ca7786bda34c52b3a44ed">tune</a> (const double &amp;tunepar)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set tuning parameter.  <a href="#a922e8dc8f8ca7786bda34c52b3a44ed"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d63/classtpk_1_1_dawdle_filter.html#0991753af5187f1d6079807875160a1a">bypass</a> (const bool &amp;bypass)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set bypass flag.  <a href="#0991753af5187f1d6079807875160a1a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d63/classtpk_1_1_dawdle_filter.html#3ac7431585169fbbfc9af0781475b4d7">limit</a> (const double &amp;t, const <a class="el" href="../../d2/d77/structtpk_1_1vector.html">vector</a> &amp;inTarget, const <a class="el" href="../../d7/d26/structtpk_1_1xycoord.html">focalplane</a> &amp;inPo, <a class="el" href="../../d2/d77/structtpk_1_1vector.html">vector</a> &amp;outTarget, <a class="el" href="../../d7/d26/structtpk_1_1xycoord.html">focalplane</a> &amp;outPo)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Limit target and pointing origin movement.  <a href="#3ac7431585169fbbfc9af0781475b4d7"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c3d2498d3c41524782f982cc24bd40ab"></a><!-- doxytag: member="tpk::DawdleFilter::TunePar" ref="c3d2498d3c41524782f982cc24bd40ab" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d63/classtpk_1_1_dawdle_filter.html#c3d2498d3c41524782f982cc24bd40ab">TunePar</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">tuning parameter (maximum velocity) <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="823538d3217b3ce174f6d72d7c4d5604"></a><!-- doxytag: member="tpk::DawdleFilter::Bypass" ref="823538d3217b3ce174f6d72d7c4d5604" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d63/classtpk_1_1_dawdle_filter.html#823538d3217b3ce174f6d72d7c4d5604">Bypass</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">bypass flag <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="498d1ab05f8762786b35db65134ff29a"></a><!-- doxytag: member="tpk::DawdleFilter::T" ref="498d1ab05f8762786b35db65134ff29a" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d63/classtpk_1_1_dawdle_filter.html#498d1ab05f8762786b35db65134ff29a">T</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">last time filter ran <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="69052e0b17938eec2067427763924b5a"></a><!-- doxytag: member="tpk::DawdleFilter::Target" ref="69052e0b17938eec2067427763924b5a" args="" -->
<a class="el" href="../../d2/d77/structtpk_1_1vector.html">vector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d63/classtpk_1_1_dawdle_filter.html#69052e0b17938eec2067427763924b5a">Target</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">target position last time <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5b15b4da955d2e68a22a87a0fb92d26b"></a><!-- doxytag: member="tpk::DawdleFilter::PO" ref="5b15b4da955d2e68a22a87a0fb92d26b" args="" -->
<a class="el" href="../../d7/d26/structtpk_1_1xycoord.html">focalplane</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d63/classtpk_1_1_dawdle_filter.html#5b15b4da955d2e68a22a87a0fb92d26b">PO</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">pointing origin last time <br></td></tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="ef163675a4b54fbdd6f9603783e94b43"></a><!-- doxytag: member="tpk::DawdleFilter::DawdleFilter" ref="ef163675a4b54fbdd6f9603783e94b43" args="(double tunepar=0.0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpk::DawdleFilter::DawdleFilter           </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>tunepar</em> = <code>0.0</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>tunepar</em>&nbsp;</td><td>
tuning parameter </td></tr>
</table>
</dl>
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a922e8dc8f8ca7786bda34c52b3a44ed"></a><!-- doxytag: member="tpk::DawdleFilter::tune" ref="a922e8dc8f8ca7786bda34c52b3a44ed" args="(const double &amp;tunepar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tpk::DawdleFilter::tune           </td>
          <td>(</td>
          <td class="paramtype">const double &amp;&nbsp;</td>
          <td class="paramname"> <em>tunepar</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set tuning parameter. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>previous value of tuning parameter </dd></dl>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>tunepar</em>&nbsp;</td><td>
tuning parameter </td></tr>
</table>
</dl>
</div>
</div><p>
<a class="anchor" name="0991753af5187f1d6079807875160a1a"></a><!-- doxytag: member="tpk::DawdleFilter::bypass" ref="0991753af5187f1d6079807875160a1a" args="(const bool &amp;bypass)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tpk::DawdleFilter::bypass           </td>
          <td>(</td>
          <td class="paramtype">const bool &amp;&nbsp;</td>
          <td class="paramname"> <em>bypass</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set bypass flag. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>previous bypass state </dd></dl>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>bypass</em>&nbsp;</td><td>
bypass flag </td></tr>
</table>
</dl>
</div>
</div><p>
<a class="anchor" name="3ac7431585169fbbfc9af0781475b4d7"></a><!-- doxytag: member="tpk::DawdleFilter::limit" ref="3ac7431585169fbbfc9af0781475b4d7" args="(const double &amp;t, const vector &amp;inTarget, const focalplane &amp;inPo, vector &amp;outTarget, focalplane &amp;outPo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tpk::DawdleFilter::limit           </td>
          <td>(</td>
          <td class="paramtype">const double &amp;&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d77/structtpk_1_1vector.html">vector</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>srcTarget</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d7/d26/structtpk_1_1xycoord.html">focalplane</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>srcPo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d77/structtpk_1_1vector.html">vector</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>destTarget</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d26/structtpk_1_1xycoord.html">focalplane</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>destPo</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Limit target and pointing origin movement. 
<p>
The requested target and pointing origin are modified to limit the change in each to the maximum velocity specified by the tuning parameter.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>status </dd></dl>
<dl compact><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>true</em>&nbsp;</td><td><a class="el" href="../../df/d08/classtpk_1_1_filter.html">Filter</a> has modified target or pointing origin. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>false</em>&nbsp;</td><td><a class="el" href="../../df/d08/classtpk_1_1_filter.html">Filter</a> has not modified target or pointing origin. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>t</em>&nbsp;</td><td>
TAI (MJD) </td></tr>
<tr><td valign="top"><em>srcTarget</em>&nbsp;</td><td>
requested target position </td></tr>
<tr><td valign="top"><em>srcPo</em>&nbsp;</td><td>
requested pointing origin </td></tr>
<tr><td valign="top"><em>destTarget</em>&nbsp;</td><td>
limited target position </td></tr>
<tr><td valign="top"><em>destPo</em>&nbsp;</td><td>
limited pointing origin </td></tr>
</table>
</dl>
</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../d9/d14/_dawdle_filter_8h-source.html">DawdleFilter.h</a><li><a class="el" href="../../dd/d98/_dawdle_filter_8cpp.html">DawdleFilter.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Mar 1 15:00:30 2007 for tpk by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1-p1 </small></address>
</body>
</html>
