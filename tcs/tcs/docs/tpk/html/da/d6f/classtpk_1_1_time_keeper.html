<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>tpk: tpk::TimeKeeper Class Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
<link href="../../tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="../../index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="../../annotated.html"><span>Classes</span></a></li>
    <li><a href="../../files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="../../annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="../../hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="../../functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<b>tpk</b>::<a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html">TimeKeeper</a></div>
<h1>tpk::TimeKeeper Class Reference</h1><!-- doxytag: class="tpk::TimeKeeper" --><code>#include &lt;<a class="el" href="../../d0/d3e/_time_keeper_8h-source.html">TimeKeeper.h</a>&gt;</code>
<p>
Collaboration diagram for tpk::TimeKeeper:<p><center><img src="../../d3/d05/classtpk_1_1_time_keeper__coll__graph.png" border="0" usemap="#d7/d60/tpk_1_1_time_keeper__coll__map" alt="Collaboration graph"></center>
<map name="d7/d60/tpk_1_1_time_keeper__coll__map">
<area href="../../d1/d00/classtpk_1_1_tcs_mutex.html" shape="rect" coords="5,5,112,32" alt="">
<area href="../../df/d6e/classtpk_1_1_site.html" shape="rect" coords="85,96,157,123" alt="">
<area href="../../d0/d52/classtpk_1_1_clock.html" shape="rect" coords="181,96,264,123" alt="">
</map>
<center><font size="2">[<a href="../../graph_legend.html">legend</a>]</font></center><a href="../../d1/dc2/classtpk_1_1_time_keeper-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Time keeper. 
<p>
A <a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html">TimeKeeper</a> object provides the instant in time that all the kernel calculations are done. Its update method, which reads the real-time clock should be called before calling the update methods of all the kernel virtual telescopes and other objects.<p>
A <a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html">TimeKeeper</a> is associated with a <a class="el" href="../../d0/d52/classtpk_1_1_clock.html">Clock</a> (which it reads each time the update method is called, and a <a class="el" href="../../df/d6e/classtpk_1_1_site.html">Site</a>.<p>
All the methods of this class are thread safe. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#c11bb02cf9305e92703158c9489f0797">TimeKeeper</a> (<a class="el" href="../../d0/d52/classtpk_1_1_clock.html">Clock</a> &amp;clock, const <a class="el" href="../../df/d6e/classtpk_1_1_site.html">Site</a> &amp;site)  throw (std::runtime_error)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#949a7fda10eaac00ed32614792edffa2">TimeKeeper</a> (const <a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html">TimeKeeper</a> &amp;)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#78678d66a68d717f5367494e8b108cc9">update</a> ()  throw ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">update  <a href="#78678d66a68d717f5367494e8b108cc9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#fe5a4df76cb9ab6a81974b4cdcdc7281">tai</a> () const  throw ()</td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9f36df8a644a079a5b81e7b2d2d918cc"></a><!-- doxytag: member="tpk::TimeKeeper::Time" ref="9f36df8a644a079a5b81e7b2d2d918cc" args="" -->
<a class="el" href="../../d0/d52/classtpk_1_1_clock.html">Clock</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#9f36df8a644a079a5b81e7b2d2d918cc">Time</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">clock <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="045f35ff77b99fffaefda658c46f01a4"></a><!-- doxytag: member="tpk::TimeKeeper::TelSite" ref="045f35ff77b99fffaefda658c46f01a4" args="" -->
const <a class="el" href="../../df/d6e/classtpk_1_1_site.html">Site</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#045f35ff77b99fffaefda658c46f01a4">TelSite</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">telescope site <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f7fc7d2e85a1d447fed9d896f67d18cc"></a><!-- doxytag: member="tpk::TimeKeeper::Mutex" ref="f7fc7d2e85a1d447fed9d896f67d18cc" args="" -->
<a class="el" href="../../d1/d00/classtpk_1_1_tcs_mutex.html">TcsMutex</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#f7fc7d2e85a1d447fed9d896f67d18cc">Mutex</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">mutex <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="38d4402f81baebbbaa85ac93bda7f8b9"></a><!-- doxytag: member="tpk::TimeKeeper::Tai" ref="38d4402f81baebbbaa85ac93bda7f8b9" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#38d4402f81baebbbaa85ac93bda7f8b9">Tai</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">time TAI (MJD) <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="62124182fdf6feefdc29919055360358"></a><!-- doxytag: member="tpk::TimeKeeper::Tt" ref="62124182fdf6feefdc29919055360358" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#62124182fdf6feefdc29919055360358">Tt</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">TT time at Tai (MJD). <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a441df39133040344df979fbf67e7909"></a><!-- doxytag: member="tpk::TimeKeeper::Cst" ref="a441df39133040344df979fbf67e7909" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#a441df39133040344df979fbf67e7909">Cst</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">cosine of sidereal time <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="be878f9f953637c373be8ad56a24d62b"></a><!-- doxytag: member="tpk::TimeKeeper::Sst" ref="be878f9f953637c373be8ad56a24d62b" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#be878f9f953637c373be8ad56a24d62b">Sst</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">sine of sidereal time <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3e8a497a4805afdd9417ae8fe952c4c1"></a><!-- doxytag: member="tpk::TimeKeeper::Dcst" ref="3e8a497a4805afdd9417ae8fe952c4c1" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#3e8a497a4805afdd9417ae8fe952c4c1">Dcst</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">rate of change of Cst per sample interval <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c3292b74a6ad7429260d912755b5eb9a"></a><!-- doxytag: member="tpk::TimeKeeper::Dsst" ref="c3292b74a6ad7429260d912755b5eb9a" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#c3292b74a6ad7429260d912755b5eb9a">Dsst</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">rate of change of Sst per sample interval <br></td></tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="c11bb02cf9305e92703158c9489f0797"></a><!-- doxytag: member="tpk::TimeKeeper::TimeKeeper" ref="c11bb02cf9305e92703158c9489f0797" args="(Clock &amp;clock, const Site &amp;site)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpk::TimeKeeper::TimeKeeper           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d52/classtpk_1_1_clock.html">Clock</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>clock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/d6e/classtpk_1_1_site.html">Site</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>site</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%">  throw (std::runtime_error)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>std::runtime_error</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>clock</em>&nbsp;</td><td>
clock </td></tr>
<tr><td valign="top"><em>site</em>&nbsp;</td><td>
site </td></tr>
</table>
</dl>
</div>
</div><p>
<a class="anchor" name="949a7fda10eaac00ed32614792edffa2"></a><!-- doxytag: member="tpk::TimeKeeper::TimeKeeper" ref="949a7fda10eaac00ed32614792edffa2" args="(const TimeKeeper &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpk::TimeKeeper::TimeKeeper           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html">TimeKeeper</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>src</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The copy constructor makes a copy of the context protected by a the source object's mutex. 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="78678d66a68d717f5367494e8b108cc9"></a><!-- doxytag: member="tpk::TimeKeeper::update" ref="78678d66a68d717f5367494e8b108cc9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tpk::TimeKeeper::update           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">  throw ()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
update 
<p>
Reads the real-time clock and generates the time for the next kernel tick.<p>
The time read from the clock is advanced by the estimate of the time that it will take the timestampled demands to reach the TCS subsystems that control the actual mechanism and then rounded up to the nearest milli- second so that the resulting time is always between the delay and delay + one millisecond in the future. 
</div>
</div><p>
<a class="anchor" name="fe5a4df76cb9ab6a81974b4cdcdc7281"></a><!-- doxytag: member="tpk::TimeKeeper::tai" ref="fe5a4df76cb9ab6a81974b4cdcdc7281" args="() const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tpk::TimeKeeper::tai           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const  throw ()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the time of the latest tick.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TAI (MJD) </dd></dl>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../d0/d3e/_time_keeper_8h-source.html">TimeKeeper.h</a><li><a class="el" href="../../d6/d29/_time_keeper_8cpp.html">TimeKeeper.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Mar 1 15:01:00 2007 for tpk by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1-p1 </small></address>
</body>
</html>
