#
# image.test,v 1.5 2005/04/10 02:12:29 jenglish Exp
#

package require Tk
package require tcltest ; namespace import -force tcltest::*
loadTestedCommands

lappend auto_path .
package require tile

# catch background errors:
#
if {[info procs bgerror] == "bgerror"} { rename bgerror {} }
array set BGerror { caught 0 message {} }
proc bgerror {message} {
    variable BGerror
    set BGerror(caught) 1
    set BGerror(message) $message
}
proc caughtbgerror {} {
    variable BGerror
    if {!$BGerror(caught)} {
        error "No bgerror caught"
    }
    set BGerror(caught) 0
    return $BGerror(message)
}

test image-1.1 "Bad image element" -body {
    style element create BadImage image badimage
    style layout BadImage { BadImage }
    ttk::label .l -style BadImage
    pack .l ; update
    destroy .l
    caughtbgerror
} -result {image "badimage" doesn't exist}

test image-1.2 "Duplicate element" -setup {
    image create photo test.element -width 10 -height 10
    style element create testElement image test.element
} -body {
    style element create testElement image test.element
} -returnCodes 1 -result "Duplicate element testElement"

#
tcltest::cleanupTests
