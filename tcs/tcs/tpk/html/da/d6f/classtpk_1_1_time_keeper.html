<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>tpk: tpk::TimeKeeper Class Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
<link href="../../tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.3 -->
<div class="tabs">
  <ul>
    <li><a href="../../index.html"><span>Main&nbsp;Page</span></a></li>
    <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
    <li><a href="../../files.html"><span>Files</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="../../annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="../../hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="../../functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul>
</div>
<div class="nav">
<b>tpk</b>::<a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html">TimeKeeper</a></div>
<h1>tpk::TimeKeeper Class Reference</h1><!-- doxytag: class="tpk::TimeKeeper" --><code>#include &lt;TimeKeeper.h&gt;</code>
<p>

<p>
<a href="../../d1/dc2/classtpk_1_1_time_keeper-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Time keeper. 
<p>
A <a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html" title="Time keeper.">TimeKeeper</a> object provides the instant in time that all the kernel calculations are done. Its update method, which reads the real-time clock should be called before calling the update methods of all the kernel virtual telescopes and other objects.<p>
A <a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html" title="Time keeper.">TimeKeeper</a> is associated with a <a class="el" href="../../d0/d52/classtpk_1_1_clock.html" title="Pure virtual base class for clocks.">Clock</a> (which it reads each time the update method is called) and a <a class="el" href="../../df/d6e/classtpk_1_1_site.html" title="Telecope site.">Site</a>.<p>
All the methods of this class are thread safe. <table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#c11bb02cf9305e92703158c9489f0797">TimeKeeper</a> (<a class="el" href="../../d0/d52/classtpk_1_1_clock.html">Clock</a> &amp;clock, const <a class="el" href="../../df/d6e/classtpk_1_1_site.html">Site</a> &amp;site)  throw (std::runtime_error)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#949a7fda10eaac00ed32614792edffa2">TimeKeeper</a> (const <a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html">TimeKeeper</a> &amp;)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#78678d66a68d717f5367494e8b108cc9">update</a> ()  throw ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">update  <a href="#78678d66a68d717f5367494e8b108cc9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#796a19cf41a7d80c8526b91db689d481">tai</a> () const   throw ()</td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c504990c66925014838e267925afa90d"></a><!-- doxytag: member="tpk::TimeKeeper::mClock" ref="c504990c66925014838e267925afa90d" args="" -->
<a class="el" href="../../d0/d52/classtpk_1_1_clock.html">Clock</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#c504990c66925014838e267925afa90d">mClock</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">clock <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1b8355e5ea81c013966e4f955c3502a0"></a><!-- doxytag: member="tpk::TimeKeeper::mSite" ref="1b8355e5ea81c013966e4f955c3502a0" args="" -->
const <a class="el" href="../../df/d6e/classtpk_1_1_site.html">Site</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#1b8355e5ea81c013966e4f955c3502a0">mSite</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">telescope site <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d405eda02a2383638c4aa352a7e49ecc"></a><!-- doxytag: member="tpk::TimeKeeper::mMutex" ref="d405eda02a2383638c4aa352a7e49ecc" args="" -->
<a class="el" href="../../d1/d00/classtpk_1_1_tcs_mutex.html">TcsMutex</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#d405eda02a2383638c4aa352a7e49ecc">mMutex</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">mutex <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="10b473b09c36faeab23039a344f0f9f3"></a><!-- doxytag: member="tpk::TimeKeeper::mTai" ref="10b473b09c36faeab23039a344f0f9f3" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#10b473b09c36faeab23039a344f0f9f3">mTai</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">time TAI (MJD) <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="32c250e903e74692aab983b305f5d7e8"></a><!-- doxytag: member="tpk::TimeKeeper::mTt" ref="32c250e903e74692aab983b305f5d7e8" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#32c250e903e74692aab983b305f5d7e8">mTt</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">TT time at Tai (MJD). <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="671bc66c0c2099f7c29752afc533708b"></a><!-- doxytag: member="tpk::TimeKeeper::mCst" ref="671bc66c0c2099f7c29752afc533708b" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#671bc66c0c2099f7c29752afc533708b">mCst</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">cosine of sidereal time <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="bb71b7582460ce1bf2b3bc13657acb18"></a><!-- doxytag: member="tpk::TimeKeeper::mSst" ref="bb71b7582460ce1bf2b3bc13657acb18" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#bb71b7582460ce1bf2b3bc13657acb18">mSst</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">sine of sidereal time <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#72f09b149c568eb5f75442d449c8f196">mDcst</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#b84f1f40871e0a3cd9cb7d029771035e">mDsst</a></td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="c11bb02cf9305e92703158c9489f0797"></a><!-- doxytag: member="tpk::TimeKeeper::TimeKeeper" ref="c11bb02cf9305e92703158c9489f0797" args="(Clock &amp;clock, const Site &amp;site)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpk::TimeKeeper::TimeKeeper           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d52/classtpk_1_1_clock.html">Clock</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>clock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/d6e/classtpk_1_1_site.html">Site</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>site</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%">  throw (std::runtime_error)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>std::runtime_error</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>clock</em>&nbsp;</td><td>
clock </td></tr>
<tr><td valign="top"><em>site</em>&nbsp;</td><td>
site </td></tr>
</table>
</dl>
</div>
</div><p>
<a class="anchor" name="949a7fda10eaac00ed32614792edffa2"></a><!-- doxytag: member="tpk::TimeKeeper::TimeKeeper" ref="949a7fda10eaac00ed32614792edffa2" args="(const TimeKeeper &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tpk::TimeKeeper::TimeKeeper           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html">TimeKeeper</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>src</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The copy constructor makes a copy of the context protected by a the source object's mutex. 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="78678d66a68d717f5367494e8b108cc9"></a><!-- doxytag: member="tpk::TimeKeeper::update" ref="78678d66a68d717f5367494e8b108cc9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tpk::TimeKeeper::update           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">  throw ()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
update 
<p>
Reads the real-time clock and generates the time for the next kernel tick.<p>
The time read from the clock is advanced by the estimate of the time that it will take the timestampled demands to reach the TCS subsystems that control the actual mechanism and then rounded up to the nearest milli- second so that the resulting time is always between the delay and delay + one millisecond in the future. 
</div>
</div><p>
<a class="anchor" name="796a19cf41a7d80c8526b91db689d481"></a><!-- doxytag: member="tpk::TimeKeeper::tai" ref="796a19cf41a7d80c8526b91db689d481" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tpk::TimeKeeper::tai           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const  throw ()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the time of the latest tick.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TAI (MJD) </dd></dl>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="72f09b149c568eb5f75442d449c8f196"></a><!-- doxytag: member="tpk::TimeKeeper::mDcst" ref="72f09b149c568eb5f75442d449c8f196" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#72f09b149c568eb5f75442d449c8f196">tpk::TimeKeeper::mDcst</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
rate of change of Cst per sample interval 
</div>
</div><p>
<a class="anchor" name="b84f1f40871e0a3cd9cb7d029771035e"></a><!-- doxytag: member="tpk::TimeKeeper::mDsst" ref="b84f1f40871e0a3cd9cb7d029771035e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="../../da/d6f/classtpk_1_1_time_keeper.html#b84f1f40871e0a3cd9cb7d029771035e">tpk::TimeKeeper::mDsst</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
rate of change of Sst per sample interval 
</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../da/dc2/_time_keeper_8h.html">TimeKeeper.h</a><li><a class="el" href="../../d6/d29/_time_keeper_8cpp.html">TimeKeeper.cpp</a></ul>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Dec 10 10:18:53 2007 for tpk by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.3 </small></address>
</body>
</html>
